# [视频观看笔记](https://www.bilibili.com/video/BV1Ki4y1u7Vr)

# 学习react源码的几个阶段
1. 掌握术语、基本实现思路 可以参照如下博客学习
2. 掌握整体工作流程、局部细节
3. 掌握关键流程的细节
4. 掌握思想
5. ？


### 掌握术语、基本实现思路 可以参照如下博客学习

首先，需要对react的术语以及思路进行学习，可以参考 https://pomb.us/build-your-own-react/ 这篇博客

### 掌握整体工作流程、局部细节（面试）

react整体源码的工作流程分为三个部分

1. schedule 调度阶段 scheduler
2. render 协调阶段 reconciler 因为renderer根据不同的环境，采用不同的方法，所以，需要操作一种与视图无关的节点，也就是**fiber**
3. commit 渲染阶段 renderer(浏览器: ReactDOM)

在这一层就需要理解react这三个步骤到底做了什么。

schedule是调度模块，我们产生的更新会有不同的优先级，这些优先级会有一个排序。schedule的作用就是把不同优先级的任务排个序，然后高优先级的任务优先进入render，在render阶段就根据这次更新来决定要改变哪些视图。然后再commit阶段，将需要改变的视图做具体的改变操作。

局部细节，主要就是学习hooks


收获：

- view视图            软件、应用
- 生命周期函数          hooks更高级的抽象，符合人脑认知
- hooks              类比为操作系统
- react底层运行流程     类比为硬件

### 掌握关键流程细节（意义在于探索前端的边界）

- 比如，scheduler 用到的数据结构是 **小顶堆**，你还需要了解**浏览器的渲染原理**，浏览器的每一帧需要做什么事情还需要了解宏任务，微任务， **lane模型** 需要我们了解**二进制掩码**
- reconciler 中的fiber采用的 **dfs深度优先遍历**，这需要你掌握基本的算法 然后**update的数据结构采用的是单向链表**

- fiber架构，他是一个并发模型，但是原生js中，已经有了并发模型，就是 **generator**，相当于react自己实现了一个并发模型


### 掌握react思想

比如class component 对应的是面向对象，function component 对应函数式。
因为**react实质上就是 state ---> view**。也就是一个状态到另一个状态。那么，使用函数式能够更好的表达**state----> view**

Function component 有个问题，我们的组件需要操作**状态、副作用**，那么在函数式变成中，我们怎么处理副作用呢？
那么在纯函数中有个思想，叫做**代数效应**，代数效应就是解决在函数式编程里副作用的问题，而hooks也不是拍脑袋决定的，它是代数效应的一个实现方案。


### 